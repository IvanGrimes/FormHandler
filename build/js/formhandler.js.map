{"version":3,"file":"FormHandler.js.map","sources":["../../src/js/common/FormHandlerError.js","../../src/js/core/Validator.js","../../src/js/core/Form.js","../../src/js/common/constants.js","../../src/js/core/Field.js","../../src/js/core/Input.js","../../src/js/core/Radio.js","../../src/js/core/Select.js","../../src/js/core/Notice.js","../../src/js/common/defaultConfig.js","../../src/js/FormHandler.js"],"sourcesContent":["export default function FormHandlerError(message) {\n  this.name = `FormHandlerError`;\n  this.message = message;\n}\n","import FormHandlerError from '../common/FormHandlerError';\n\nexport default class Validator {\n  constructor(custom) {\n    this.custom = custom;\n\n    this.addCustomValidations();\n  }\n\n  addCustomValidations() {\n    Object.entries(this.custom).forEach(([type, obj]) => {\n      Validator.validations[type] = obj;\n    });\n    return this;\n  };\n\n  static validate({type, node, min, max}) {\n    let validation = Validator.validations[type];\n\n    if (!validation) {\n      throw new FormHandlerError(`No handler to validate type ${type}`);\n    }\n\n    return validation(node, min, max);\n  }\n\n  static getMessage({type, node, min, max}) {\n    return Validator.validations[type](node, min, max).message;\n  }\n\n  static validations = {\n    isCheckboxChecked(node, min, max) {\n      let valid = false,\n          message = 'Check any boxes',\n          checked = 0;\n\n      node.forEach(el => {\n        el.checked ? checked += 1 : null;\n      });\n\n      if (min && max) {\n        valid = !!(min && max && checked >= min && checked <= max);\n      }\n      if (min && !max) {\n        valid = checked >= min;\n      }\n      if (!min && max) {\n        valid = checked <= max;\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isRadioChecked(node) {\n      let valid = Array.from(node).some(el => el.checked === true),\n          message = 'Please, press any button';\n\n      console.log('radio',valid);\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isSelected(node) {\n      const valid = Array.from(node.options)\n                         .filter(el => el.value.length > 0)\n                         .some(el => el.selected === true),\n        message = 'Please, choose any option';\n      return {\n        valid,\n        message,\n      };\n    },\n    isName(node, min, max) {\n      const pattern = /^[A-Za-z]/;\n      let valid = pattern.test(node.value),\n          message = `Must contain any latin character`;\n\n      if (node.value.length === 0) {\n        valid = false;\n        if (min && !max) {\n          message = `Must contain at least ${min} latin character`;\n        }\n        if (!min && max) {\n          message = `Must contain at least one latin character and less than ${max + 1}`;\n        }\n        if (min && max) {\n          message = `Must contain between ${min} and ${max} latin characters`;\n        }\n      } else {\n        if (min && node.value.length < min) {\n          valid = false;\n          message = `Must contain at least ${min} latin characters`;\n        }\n        if (max && node.value.length > max) {\n          valid = false;\n          message = `Must contain less than ${max + 1} latin characters`;\n        }\n        if (min && node.value.length > min) {\n          valid = true;\n        }\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isEmail(node) {\n      const pattern = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n      let valid = pattern.test(node.value),\n          message = `Must be a valid email address`;\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isPhone(node, min, max) {\n      const pattern = /^[+]?[\\s./0-9]*[(]?[0-9]{1,4}[)]?[-\\s./0-9]*$/g;\n      let valid = pattern.test(node.value),\n          message = `Must contain a valid phone number`;\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isNonEmpty(node, min, max) {\n      let valid = node.value.length > 0,\n          message = `Must be non empty`;\n\n      if (min && node.value.length < min && node.value.length !== 0) {\n        valid = false;\n      }\n      if (max && node.value.length > max && node.value.length !== 0) {\n        valid = false;\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n  };\n}\n","export default class Form {\n  constructor({ ...opts }) {\n    this.node = opts.node;\n    this.submit = opts.submit;\n    this.classNames = opts.classNames;\n    this.fields = opts.fields;\n    this.listener = opts.listener;\n    this.valid = false;\n\n    this.submit.addEventListener('click', this.listener);\n  }\n\n  setFormState() {\n    let validness = new Set();\n\n    Object.entries(this.fields).forEach(([name, field]) => {\n      validness.add(field.valid);\n    });\n\n    this.valid = !validness.has(false);\n\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  resetForm() {\n    Object.entries(this.fields).forEach(([name, field]) => {\n      field.clear();\n    });\n\n    this.valid = false;\n    this.node.classList.remove(this.classNames.isNotValid);\n    this.node.classList.remove(this.classNames.isValid);\n  }\n}\n","export const RADIO_NODE_LIST = 'RadioNodeList';\nexport const HTML_SELECT_ELEMENT = 'HTMLSelectElement';\nexport const HTML_INPUT_ELEMENT = 'HTMLInputElement';\nexport const HTML_TEXTAREA_ELEMENT = 'HTMLTextAreaElement';\nexport const INPUT = 'input';\n","import {\n  RADIO_NODE_LIST,\n} from '../common/constants';\n\nexport default class Field {\n  constructor({...opts}) {\n    this.node = opts.node;\n    this.name = this.node.constructor.name === RADIO_NODE_LIST ? this.node[0].name : this.node.name;\n    this.validation = opts.validation;\n    this.min = opts.min;\n    this.max = opts.max;\n    this.classNames = opts.classNames;\n    this.valid = false;\n  }\n\n  get validatorOptions() {\n    return {\n      type: this.validation,\n      node: this.node,\n      min: this.min,\n      max: this.max,\n    };\n  };\n\n  on(type, listener) {\n    if (this.node.constructor.name === RADIO_NODE_LIST) {\n      this.node.forEach(el => el.addEventListener(type, listener));\n    } else {\n      this.node.addEventListener(type, listener);\n    }\n  }\n\n  off(type, listener) {\n    if (this.node.constructor.name === RADIO_NODE_LIST) {\n      this.node.forEach(el => el.removeEventListener(type, listener));\n    } else {\n      this.node.removeEventListener(type, listener);\n    }\n  }\n}\n","import Field from './Field';\n\nexport default class Input extends Field {\n  constructor({...opts}) {\n    super({...opts});\n  }\n\n  setFieldState(valid) {\n    this.valid = valid;\n    this.toggleClassNames();\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    this.node.value = \"\";\n    this.valid = false;\n    this.node.classList.remove(this.classNames.isNotValid);\n    this.node.classList.remove(this.classNames.isValid);\n  }\n}\n","import Field from './Field';\n\nexport default class Radio extends Field {\n  constructor({...opts}) {\n    super({...opts});\n  }\n\n  setFieldState(valid) {\n    this.valid = valid;\n    this.toggleClassNames();\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.forEach(el => el.classList.remove(this.classNames.isNotValid));\n      this.node.forEach(el => el.classList.add(this.classNames.isValid));\n    } else {\n      this.node.forEach(el => el.classList.remove(this.classNames.isValid));\n      this.node.forEach(el => el.classList.add(this.classNames.isNotValid));\n    }\n  }\n\n  clear() {\n    this.valid = false;\n    this.node.forEach(el => el.classList.remove(this.classNames.isValid));\n    this.node.forEach(el => el.classList.remove(this.classNames.isNotValid));\n    this.node.forEach(el => el.checked = false);\n  }\n}\n","import Field from './Field';\n\nexport default class Select extends Field {\n  constructor({...opts}) {\n    super({...opts})\n  }\n\n  setFieldState(valid) {\n    this.valid = valid;\n    this.toggleClassNames();\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    this.valid = false;\n    this.node.classList.remove(this.classNames.isValid);\n    this.node.classList.remove(this.classNames.isNotValid);\n    Array.from(this.node.options).forEach(el => el.selected = false);\n  }\n}\n","export default class Notice {\n  constructor({ ...opts }) {\n    this.form = opts.form;\n    this.message = opts.message;\n    this.classNames = opts.classNames;\n    this.attachTo = opts.attachTo;\n    this.nextToField = opts.nextToField;\n    this.parent = opts.parent;\n    this.node = null;\n    this.mount();\n  }\n\n  mount() {\n    this.node = document.createElement('div');\n    this.node.classList.add(this.classNames.block);\n    this.node.classList.add(this.classNames.hidden);\n\n    if (this.attachTo) {\n      this.parent.appendChild(this.node);\n    } else {\n      if (this.nextToField === 'before') { // TODO: Change option to a true/false, and it'll be stick notice next to the field\n        this.form.insertBefore(this.node, this.parent);\n      }\n      if (this.nextToField === 'after') {\n        this.form.insertBefore(this.node, this.parent.nextElementSibling);\n      }\n    }\n  };\n\n  show() {\n    this.node.classList.remove(this.classNames.hidden);\n    this.node.classList.add(this.classNames.visible);\n    this.node.innerText = this.message;\n  };\n\n  hide() {\n    this.node.classList.remove(this.classNames.visible);\n    this.node.classList.add(this.classNames.hidden);\n  }\n}\n","export default {\n  form: {\n    block: '.formhandler',\n    submit: '.formhandler__submit',\n    notice: {\n      attachTo: '.formhandler__notices',\n      successMsg: 'ok',\n      invalidMsg: 'please, fill the form',\n      errorMsg: 'oops',\n      classNames: {\n        block: 'formhandler__notice-form',\n        hidden: 'formhandler__notice-form--hidden',\n        visible: 'formhandler__notice-form--visible',\n      },\n    },\n  },\n  fields: {\n    min: false,\n    max: false,\n  },\n  notices: {\n    attachTo: '.formhandler__notices',\n    nextToField: false,\n    message: false,\n  },\n  classNames: {\n    notices: {\n      block: 'formhandler__notice',\n      hidden: 'formhandler__notice--hidden',\n      visible: 'formhandler__notice--visible',\n    },\n    form: {\n      isValid: 'formhandler--is-valid',\n      isNotValid: 'formhandler--is-not-valid',\n      disabledSubmitButton: 'formhandler__submit--disabled',\n    },\n    fields: {\n      isValid: 'formhandler__field--is-valid',\n      isNotValid: 'formhandler__field--is-not-valid',\n    },\n  },\n}\n","import Validator from './core/Validator';\nimport Form from './core/Form';\nimport Input from './core/Input';\nimport Radio from './core/Radio';\nimport Select from './core/Select';\nimport Notice from './core/Notice';\nimport defaultConfig from './common/defaultConfig';\nimport {\n  RADIO_NODE_LIST,\n  HTML_SELECT_ELEMENT,\n  HTML_INPUT_ELEMENT,\n  HTML_TEXTAREA_ELEMENT,\n  INPUT,\n} from './common/constants';\n\nexport default class FormHandler {\n  constructor({...args}) {\n    this.opts = args;\n    this.fields = {};\n    this.notices = {};\n    this.form = null;\n    this.validator = new Validator(this.opts.customValidations);\n    this.init();\n  }\n\n  init() {\n    this.complementOptions().makeForm();\n\n    Object.entries(this.opts.fields).forEach(([name, field]) => {\n      this.makeField(name, field).makeNotice(name, field.notice);\n    });\n\n    return this;\n  }\n\n  complementOptions() {\n    // Add lacks classNames and merge.\n    this.opts.classNames = this.opts.classNames ? {...defaultConfig.classNames, ...this.opts.classNames} : defaultConfig.classNames;\n    this.opts.classNames.form = {...defaultConfig.classNames.form, ...this.opts.classNames.form};\n    this.opts.classNames.fields = {...defaultConfig.classNames.fields, ...this.opts.classNames.fields};\n    this.opts.classNames.notices = {...defaultConfig.classNames.notices, ...this.opts.classNames.notices};\n    // Add lacks form options and merge.\n    this.opts.form = this.opts.form ? {...defaultConfig.form, ...this.opts.form} : defaultConfig.form;\n    this.opts.form.notice = {...defaultConfig.form.notice, ...this.opts.form.notice};\n    this.opts.form.notice.classNames = {...this.opts.classNames.notice, ...this.opts.form.notice.classNames};\n    // Add lacks notices options and merge\n    this.opts.notices = {...defaultConfig.notices, ...this.opts.notices};\n    // Add lacks fields options and merge\n    Object.entries(this.opts.fields).forEach(([name, obj]) => {\n      this.opts.fields[name] = {...defaultConfig.fields, ...this.opts.fields[name]};\n      this.opts.fields[name].classNames = this.opts.fields[name].classNames ? {...this.opts.classNames.fields, ...this.opts.fields[name].classNames} : this.opts.classNames.fields;\n      this.opts.fields[name].notice = {...this.opts.notices, ...this.opts.fields[name].notice};\n      this.opts.fields[name].notice.classNames = {...this.opts.classNames.notices, ...this.opts.fields[name].notice.classNames};\n    });\n\n    return this;\n  } // TODO: Need a review\n\n  makeForm() {\n    const options = {\n      fields: this.fields,\n      classNames: this.opts.classNames.form,\n      node: document.querySelector(this.opts.form.block),\n      submit: document.querySelector(this.opts.form.submit),\n      listener: this.submitHandler,\n    };\n\n    this.form = new Form(options);\n\n    this.makeNotice('form', this.opts.form.notice);\n    return this;\n  }\n\n  makeField(name, field) {\n    const node = this.form.node[name],\n      type = node.constructor.name,\n      options = {\n        node: node,\n        validation: field.validation,\n        min: field.min,\n        max: field.max,\n        classNames: field.classNames,\n        listener: this.inputHandler,\n      };\n\n    if (type === HTML_INPUT_ELEMENT ||\n      type === HTML_TEXTAREA_ELEMENT) {\n      this.fields[name] = new Input(options);\n    }\n\n    if (type === RADIO_NODE_LIST) {\n      this.fields[name] = new Radio(options);\n    }\n\n    if (type === HTML_SELECT_ELEMENT) {\n      this.fields[name] = new Select(options);\n    }\n\n    return this;\n  }\n\n  makeNotice(name, notice) { // TODO: Make beautiful\n    this.notices[name] = new Notice({\n      form: this.form.node,\n      classNames: notice.classNames,\n      attachTo: notice.attachTo,\n      message: notice.message || Validator.getMessage(this.fields[name].validatorOptions),\n      nextToField: notice.nextToField,\n      parent: notice.nextToField ? this.fields[name].node : document.querySelector(notice.attachTo),\n    });\n    return this;\n  }\n\n  setStateFromResponse(response, property, name, message) {\n    response\n      .then(data => data.json())\n      .then(json => this.setFieldAndNoticeStates(name, !!json[property], message));\n  }\n\n  setFieldAndNoticeStates(name, valid, message) {\n    console.log(name, valid);\n    if (typeof valid === 'object') {\n      this.setStateFromResponse(valid.response, valid.property, name, message);\n    } else {\n      this.fields[name].setFieldState(valid);\n    }\n    this.notices[name].message = message;\n    if (valid) {\n      this.notices[name].hide();\n    } else {\n      this.notices[name].show();\n    }\n    this.form.setFormState();\n    return this;\n  }\n\n  inputHandler = ev => {\n    const name = ev.target.name,\n          validation = Validator.validate(this.fields[name].validatorOptions);\n    console.log(name)\n\n    this.setFieldAndNoticeStates(name, validation.valid, validation.message);\n  }\n\n  submitHandler = (ev) => {\n    ev.preventDefault();\n    Object.entries(this.fields).forEach(([name, field]) => {\n      const validation = Validator.validate(field.validatorOptions);\n\n      this.setFieldAndNoticeStates(name, validation.valid, validation.message);\n      field.on(INPUT, this.inputHandler);\n    });\n\n    this.form.setFormState();\n\n    if (this.form.valid) {\n      this.notices.form.hide();\n      console.log('form is valid');\n    } else {\n      console.log('form is not valid');\n      this.notices.form.show();\n      setTimeout(() => {\n        this.notices.form.hide();\n      }, 2000)\n    }\n  }\n}\n"],"names":["FormHandlerError","message","name","Validator","custom","addCustomValidations","Object","entries","forEach","type","obj","validations","node","min","max","validation","isCheckboxChecked","valid","checked","el","isRadioChecked","Array","from","some","console","log","isSelected","options","filter","value","length","selected","isName","pattern","test","isEmail","isPhone","isNonEmpty","Form","opts","submit","classNames","fields","listener","addEventListener","validness","Set","field","add","has","classList","remove","isNotValid","isValid","clear","RADIO_NODE_LIST","HTML_SELECT_ELEMENT","HTML_INPUT_ELEMENT","HTML_TEXTAREA_ELEMENT","INPUT","Field","constructor","removeEventListener","Input","toggleClassNames","Radio","Select","Notice","form","attachTo","nextToField","parent","mount","document","createElement","block","hidden","appendChild","insertBefore","nextElementSibling","visible","innerText","notice","successMsg","invalidMsg","errorMsg","notices","disabledSubmitButton","FormHandler","args","ev","target","validate","validatorOptions","setFieldAndNoticeStates","preventDefault","on","inputHandler","setFormState","hide","show","setTimeout","validator","customValidations","init","complementOptions","makeForm","makeField","makeNotice","defaultConfig","querySelector","submitHandler","getMessage","response","property","then","data","json","setStateFromResponse","setFieldState"],"mappings":"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"}
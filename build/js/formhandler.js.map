{"version":3,"file":"FormHandler.js.map","sources":["../../src/js/common/FormHandlerError.js","../../src/js/core/Validator.js","../../src/js/common/constants.js","../../src/js/core/Form.js","../../src/js/core/Field.js","../../src/js/core/Input.js","../../src/js/core/Radio.js","../../src/js/core/Select.js","../../src/js/core/Notice.js","../../src/js/core/Sender.js","../../src/js/common/defaultConfig.js","../../src/js/core/FormHandlerUtil.js","../../src/js/FormHandler.js"],"sourcesContent":["// export default function FormHandlerError(message) {\n//   this.name = `FormHandlerError`;\n//   this.message = message;\n// }\n\nexport default class FormHandlerError extends Error {\n  constructor(props) {\n    super(props);\n  }\n}\n","import FormHandlerError from '../common/FormHandlerError';\n\nexport default class Validator {\n  constructor(custom) {\n    this.custom = custom;\n\n    this.addCustomValidations();\n  }\n\n  addCustomValidations() {\n    Object.entries(this.custom).forEach(([type, obj]) => {\n      Validator.validations[type] = obj;\n    });\n    return this;\n  };\n\n  static validate({type, node, min, max}) {\n    if (!type) return;\n    let validation = Validator.validations[type];\n\n    if (!validation) {\n      throw new FormHandlerError(`No handler to validate type ${type}`);\n    }\n\n    return validation(node, min, max);\n  }\n\n  static getMessage({type, node, min, max}) {\n    return Validator.validations[type](node, min, max).message;\n  }\n\n  static validations = {\n    isCheckboxChecked(node, min, max) {\n      let valid = false,\n          message = 'Check any boxes',\n          checked = 0;\n\n      node.forEach(el => {\n        el.checked ? checked += 1 : null;\n      });\n\n      if (min && max) {\n        valid = !!(min && max && checked >= min && checked <= max);\n      }\n      if (min && !max) {\n        valid = checked >= min;\n      }\n      if (!min && max) {\n        valid = checked <= max;\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isRadioChecked(node) {\n      let valid = Array.from(node).some(el => el.checked === true),\n          message = 'Please, press any button';\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isSelected(node) {\n      const valid = Array.from(node.options)\n                         .filter(el => el.value.length > 0)\n                         .some(el => el.selected === true),\n        message = 'Please, choose any option';\n      return {\n        valid,\n        message,\n      };\n    },\n    isName(node, min, max) {\n      const pattern = /^[A-Za-z]/;\n      let valid = pattern.test(node.value),\n          message = `Must contain any latin character`;\n\n      if (node.value.length === 0) {\n        valid = false;\n        if (min && !max) {\n          message = `Must contain at least ${min} latin character`;\n        }\n        if (!min && max) {\n          message = `Must contain at least one latin character and less than ${max + 1}`;\n        }\n        if (min && max) {\n          message = `Must contain between ${min} and ${max} latin characters`;\n        }\n      } else {\n        if (min && node.value.length < min) {\n          valid = false;\n          message = `Must contain at least ${min} latin characters`;\n        }\n        if (max && node.value.length > max) {\n          valid = false;\n          message = `Must contain less than ${max + 1} latin characters`;\n        }\n        if (min && node.value.length > min) {\n          valid = true;\n        }\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isEmail(node) {\n      const pattern = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n      let valid = pattern.test(node.value),\n          message = `Must be a valid email address`;\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isPhone(node, min, max) {\n      const pattern = /^[+]?[\\s./0-9]*[(]?[0-9]{1,4}[)]?[-\\s./0-9]*$/g;\n      let valid = pattern.test(node.value),\n          message = `Must contain a valid phone number`;\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isNonEmpty(node, min, max) {\n      let valid = node.value.length > 0,\n          message = `Must be non empty`;\n\n      if (min && node.value.length < min && node.value.length !== 0) {\n        valid = false;\n      }\n      if (max && node.value.length > max && node.value.length !== 0) {\n        valid = false;\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n  };\n}\n","export const RADIO_NODE_LIST = 'RadioNodeList';\nexport const HTML_SELECT_ELEMENT = 'HTMLSelectElement';\nexport const HTML_INPUT_ELEMENT = 'HTMLInputElement';\nexport const HTML_TEXTAREA_ELEMENT = 'HTMLTextAreaElement';\nexport const INPUT = 'input';\nexport const LOAD = 'load';\nexport const UNDEFINED = 'undefined';\nexport const SUCCESS = 'success';\nexport const ERROR = 'error';\nexport const OBJECT = 'object';\nexport const FORM = 'form';\nexport const CLICK = 'click';\nexport const DIV = 'div';\nexport const READYSTATECHANGE = 'readystatechange';\nexport const XHR = 'xhr';\nexport const FETCH = 'fetch';\nexport const AFTER = 'after';\nexport const BEFORE = 'before';\nexport const STRING = 'string';\n","import {\n  CLICK,\n} from '../common/constants';\n\nexport default class Form {\n  constructor({ ...opts }) {\n    this.node = opts.node;\n    this.submit = opts.submit;\n    this.classNames = opts.classNames;\n    this.fields = opts.fields;\n    this.listener = opts.listener;\n    this.valid = false;\n    this.submitted = false;\n    this.sended = null;\n\n    this.submit.addEventListener(CLICK, this.listener);\n  }\n\n  setFormState() {\n    let validness = new Set();\n\n    Object.entries(this.fields).forEach(([name, field]) => {\n      if (field.validation) {\n        validness.add(field.valid);\n      }\n    });\n\n    this.valid = !validness.has(false);\n\n    if (this.submitted) {\n      this.toggleClassNames();\n    }\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    Object.entries(this.fields).forEach(([name, field]) => {\n      field.clear();\n    });\n\n    this.valid = false;\n    this.node.classList.remove(this.classNames.isNotValid);\n    this.node.classList.remove(this.classNames.isValid);\n  }\n}\n","import {\n  RADIO_NODE_LIST,\n} from '../common/constants';\n\nexport default class Field {\n  constructor({node, validation, min, max, send, classNames, callback}) {\n    this.node = node;\n    this.name = this.node.constructor.name === RADIO_NODE_LIST ? this.node[0].name : this.node.name;\n    this.validation = validation;\n    this.send = send;\n    this.min = min;\n    this.max = max;\n    this.classNames = classNames;\n    this.valid = false;\n    this.submitted = false;\n    this.callback = callback;\n  }\n\n  get validatorOptions() {\n    return {\n      type: this.validation,\n      node: this.node,\n      min: this.min,\n      max: this.max,\n    };\n  };\n\n  on(type, listener) {\n    if (this.node.constructor.name === RADIO_NODE_LIST) {\n      this.node.forEach(el => el.addEventListener(type, listener));\n    } else {\n      this.node.addEventListener(type, listener);\n    }\n  }\n\n  off(type, listener) {\n    if (this.node.constructor.name === RADIO_NODE_LIST) {\n      this.node.forEach(el => el.removeEventListener(type, listener));\n    } else {\n      this.node.removeEventListener(type, listener);\n    }\n  }\n\n  remove() {\n    this.node.remove();\n  }\n}\n","import Field from './Field';\n\nexport default class Input extends Field {\n  constructor({...opts}) {\n    super({...opts});\n  }\n\n  setFieldState(valid) {\n    this.callback(this.name, this.node, this.valid, valid);\n\n    this.valid = valid;\n\n    if (this.submitted) {\n      this.toggleClassNames();\n    }\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    this.node.value = \"\";\n    this.valid = false;\n    this.submitted = false;\n    this.node.classList.remove(this.classNames.isNotValid);\n    this.node.classList.remove(this.classNames.isValid);\n  }\n}\n","import Field from './Field';\n\nexport default class Radio extends Field {\n  constructor({...opts}) {\n    super({...opts});\n  }\n\n  setFieldState(valid) {\n    this.callback(this.name, this.node, this.valid, valid);\n\n    this.valid = valid;\n\n    if (this.submitted) {\n      this.toggleClassNames();\n    }\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.forEach(el => el.classList.remove(this.classNames.isNotValid));\n      this.node.forEach(el => el.classList.add(this.classNames.isValid));\n    } else {\n      this.node.forEach(el => el.classList.remove(this.classNames.isValid));\n      this.node.forEach(el => el.classList.add(this.classNames.isNotValid));\n    }\n  }\n\n  clear() {\n    this.valid = false;\n    this.submitted = false;\n    this.node.forEach(el => el.classList.remove(this.classNames.isValid));\n    this.node.forEach(el => el.classList.remove(this.classNames.isNotValid));\n    this.node.forEach(el => el.checked = false);\n  }\n}\n","import Field from './Field';\n\nexport default class Select extends Field {\n  constructor({...opts}) {\n    super({...opts})\n  }\n\n  setFieldState(valid) {\n    this.callback(this.name, this.node, this.valid, valid);\n\n    this.valid = valid;\n\n    if (this.submitted) {\n      this.toggleClassNames();\n    }\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    this.valid = false;\n    this.submitted = false;\n    this.node.classList.remove(this.classNames.isValid);\n    this.node.classList.remove(this.classNames.isNotValid);\n    Array.from(this.node.options).forEach(el => el.selected = false);\n  }\n}\n","import {\n  DIV,\n  BEFORE,\n  AFTER,\n} from '../common/constants';\n\n\nexport default class Notice {\n  constructor({form, message, classNames, attachTo, nextToField, parent}) {\n    this.form = form;\n    this.message = message;\n    this.classNames = classNames;\n    this.attachTo = attachTo;\n    this.nextToField = nextToField;\n    this.parent = parent;\n    this.node = null;\n    this.mount();\n  }\n\n  mount() {\n    this.node = document.createElement(DIV);\n    this.node.classList.add(this.classNames.block);\n    this.node.classList.add(this.classNames.hidden);\n\n    if (this.attachTo) {\n      this.parent.appendChild(this.node);\n    } else {\n      if (this.nextToField === BEFORE) {\n        this.form.insertBefore(this.node, this.parent);\n      }\n      if (this.nextToField === AFTER) {\n        this.form.insertBefore(this.node, this.parent.nextElementSibling);\n      }\n    }\n  };\n\n  show() {\n    this.node.classList.remove(this.classNames.hidden);\n    this.node.classList.add(this.classNames.visible);\n    this.node.innerText = this.message;\n  };\n\n  hide() {\n    this.node.classList.remove(this.classNames.visible);\n    this.node.classList.add(this.classNames.hidden);\n  }\n\n  remove() {\n    this.node.remove();\n  }\n}\n","import {\n  HTML_INPUT_ELEMENT,\n  HTML_TEXTAREA_ELEMENT,\n  RADIO_NODE_LIST,\n  HTML_SELECT_ELEMENT,\n  READYSTATECHANGE,\n  FETCH,\n  XHR,\n  SUCCESS,\n  ERROR,\n  OBJECT,\n} from \"../common/constants\";\n\nexport default class Sender {\n  constructor({type, url, method, fields, form, callbackOnSend}) {\n    this.type = type;\n    this.url = url;\n    this.method = method;\n    this.fields = fields;\n    this.form = form;\n    this.callbackOnSend = callbackOnSend;\n    this.sendRequest(this.makeData());\n  }\n\n  makeData() {\n    const data = new FormData();\n\n    Object.entries(this.fields).forEach(([name, field]) => {\n      if (!field.send) return;\n      const type = field.node.constructor.name;\n\n      if (type === HTML_INPUT_ELEMENT ||\n          type === HTML_TEXTAREA_ELEMENT) {\n        data.append(field.name, field.node.value);\n      }\n      if (type === HTML_SELECT_ELEMENT) {\n        data.append(field.name, field.node.options[field.node.options.selectedIndex].value);\n      }\n      if (type === RADIO_NODE_LIST) {\n        Array.from(field.node).forEach(node => {\n          if (node.checked) {\n            data.append(field.name, node.value);\n          }\n        });\n      }\n    });\n\n    return data;\n  }\n\n  sendRequest(data) {\n    if (this.type === XHR) {\n      const xhr = new XMLHttpRequest();\n      xhr.open(this.method, this.url, true);\n      xhr.addEventListener(READYSTATECHANGE, (ev) => {\n        if (ev.target.readyState === 4) {\n          if (ev.target.status >= 200 && ev.target.status < 400) {\n            this.callbackOnSend(SUCCESS);\n          } else {\n            console.log(`Status: ${ev.target.status}, Text: ${ev.target.statusText}`);\n            this.callbackOnSend(ERROR);\n          }\n        }\n      });\n      xhr.send(data);\n    }\n\n    if (this.type === FETCH) {\n      fetch(this.url, {\n        method: this.method,\n        body: data,\n      }).then(data => {\n        if (data.status >= 200 && data.status < 400) {\n          this.callbackOnSend(SUCCESS);\n        } else {\n          console.log(`Status: ${data.status}, Text: ${data.statusText}`);\n          this.callbackOnSend(ERROR);\n        }\n      });\n    }\n  }\n}\n","export default {\n  form: {\n    block: '.formhandler',\n    submit: '.formhandler__submit',\n    notice: {\n      attachTo: '.formhandler__notices',\n      message: 'please, fill the form',\n      successMessage: 'ok',\n      errorMessage: 'oops',\n      classNames: {\n        block: 'formhandler__notice-form',\n        hidden: 'formhandler__notice-form--hidden',\n        visible: 'formhandler__notice-form--visible',\n      },\n    },\n  },\n  fields: {\n    min: false,\n    max: false,\n    send: true,\n  },\n  notices: {\n    attachTo: '.formhandler__notices',\n    nextToField: false,\n    message: false,\n  },\n  classNames: {\n    notices: {\n      block: 'formhandler__notice',\n      hidden: 'formhandler__notice--hidden',\n      visible: 'formhandler__notice--visible',\n    },\n    form: {\n      isValid: 'formhandler--is-valid',\n      isNotValid: 'formhandler--is-not-valid',\n      disabledSubmitButton: 'formhandler__submit--disabled',\n    },\n    fields: {\n      isValid: 'formhandler__field--is-valid',\n      isNotValid: 'formhandler__field--is-not-valid',\n    },\n  },\n  sender: {\n    send: true,\n    type: 'xhr',\n  },\n  callbacks: {\n    onFieldChangeState() {},\n  },\n}\n","import Validator from \"./Validator\";\nimport defaultConfig from \"../common/defaultConfig\";\nimport {\n  HTML_INPUT_ELEMENT,\n  HTML_SELECT_ELEMENT,\n  HTML_TEXTAREA_ELEMENT, OBJECT,\n  RADIO_NODE_LIST, STRING\n} from \"../common/constants\";\n\nexport default class FormHandlerUtil {\n  constructor({...args}) {\n    this.opts = args;\n    this.fields = {};\n    this.notices = {};\n    this.form = null;\n    this.validator = new Validator(this.opts.customValidations);\n    this.callbacks = this.opts.callbacks;\n    console.log(this.callbacks);\n  }\n\n  complementOptions() {\n    // Add lacks classNames and merge.\n    this.opts.classNames = this.opts.classNames ? {...defaultConfig.classNames, ...this.opts.classNames} : defaultConfig.classNames;\n    this.opts.classNames.form = {...defaultConfig.classNames.form, ...this.opts.classNames.form};\n    this.opts.classNames.fields = {...defaultConfig.classNames.fields, ...this.opts.classNames.fields};\n    this.opts.classNames.notices = {...defaultConfig.classNames.notices, ...this.opts.classNames.notices};\n    // Add lacks form options and merge.\n    this.opts.form = this.opts.form ? {...defaultConfig.form, ...this.opts.form} : defaultConfig.form;\n    this.opts.form.notice = {...defaultConfig.form.notice, ...this.opts.form.notice};\n    this.opts.form.notice.classNames = {...this.opts.classNames.notice, ...this.opts.form.notice.classNames};\n    // Add lacks notices options and merge\n    this.opts.notices = {...defaultConfig.notices, ...this.opts.notices};\n    // Add lacks fields options and merge\n    Object.entries(this.opts.fields).forEach(([name, obj]) => {\n      this.opts.fields[name] = {...defaultConfig.fields, ...this.opts.fields[name]};\n      this.opts.fields[name].classNames = this.opts.fields[name].classNames ? {...this.opts.classNames.fields, ...this.opts.fields[name].classNames} : this.opts.classNames.fields;\n      this.opts.fields[name].notice = {...this.opts.notices, ...this.opts.fields[name].notice};\n      this.opts.fields[name].notice.classNames = {...this.opts.classNames.notices, ...this.opts.fields[name].notice.classNames};\n    });\n    this.opts.sender = this.opts.sender ? {...defaultConfig.sender, ...this.opts.sender} : defaultConfig.sender;\n\n    return this;\n  }\n\n  getFieldNameBy(field) { // return field name get by NodeList/Selector(.className)\n    const type = typeof field;\n    let name;\n\n    if (type === OBJECT) {\n      name = field.name;\n    }\n    if (type === STRING) {\n      const isSelector = /\\./.test(field);\n\n      if (isSelector) {\n        name = this.form.node.querySelector(field).name;\n      } else {\n        name = field;\n      }\n    }\n\n    return name;\n  }\n\n  isFieldValid(field) {\n    return this.fields[this.getFieldNameBy(field)].valid;\n  }\n\n  isFormValid() {\n    return this.form.valid;\n  }\n\n  isFormSubmitted() {\n    return this.form.submitted;\n  }\n\n  isFormSent() {\n    return this.form.sended;\n  }\n\n  clearForm() {\n    this.form.clear();\n  }\n\n  clearField(field) { // Also clears classNames and field of instance like valid, submitted\n    this.fields[this.getFieldNameBy(field)].clear();\n  }\n\n  getField(field) { // Returns a field node\n    return this.fields[this.getFieldNameBy(field)].node;\n  }\n\n  addField(field, {...opts}) {\n    opts.notice = opts.notice ? opts.notice : {};\n    const name = this.getFieldNameBy(field),\n      fieldOptions = {\n        validation: opts.validation,\n        min: opts.min || defaultConfig.fields.min,\n        max: opts.max || defaultConfig.fields.max,\n        send: opts.send || defaultConfig.fields.send,\n        classNames: { ...this.opts.classNames.fields, ...opts.classNames },\n      },\n      noticeOptions = {\n        attachTo: opts.notice.attachTo || defaultConfig.notices.attachTo,\n        nextToField: opts.notice.nextToField || defaultConfig.notices.nextToField,\n        message: opts.notice.message || defaultConfig.notices.message,\n        classNames: { ...this.opts.classNames.notices, ...opts.notice.classNames },\n      };\n\n    this.makeField(name, fieldOptions);\n    this.makeNotice(name, noticeOptions);\n\n    return this.fields[name].node;\n  }\n\n  removeField(field) {\n    const name = this.getFieldNameBy(field);\n\n    this.fields[name].remove();\n    this.notices[name].remove();\n  }\n\n  validateField(field) { // also turns on toggleClassNames\n    const name = this.getFieldNameBy(field);\n\n    if (field.validation) {\n      const validation = Validator.validate(this.fields[name].validatorOptions);\n      this.fields[name].submitted = true;\n      this.setFieldState(name, validation.valid);\n    }\n\n    return this.fields[name].node;\n  }\n\n  validateForm() {\n    Object.entries(this.fields).forEach(([name, field]) => {\n      if (field.validation) {\n        const validation = Validator.validate(field.validatorOptions);\n        field.submitted = true;\n        this.setFieldState(name, validation.valid);\n      }\n\n    });\n\n    this.form.submitted = true;\n    this.form.setFormState();\n\n    return this.form.node;\n  }\n\n  getFieldsAndValues() {\n    const data = {};\n\n    Object.entries(this.fields).forEach(([name, field]) => {\n      const type = field.node.constructor.name;\n      if (type === HTML_INPUT_ELEMENT ||\n        type === HTML_TEXTAREA_ELEMENT) {\n        data[name] = field.node.value;\n      }\n      if (type === HTML_SELECT_ELEMENT) {\n        data[name] = field.node.options[field.node.options.selectedIndex].value;\n      }\n      if (type === RADIO_NODE_LIST) {\n        data[name] = [];\n        Array.from(field.node).forEach(node => {\n          if (node.checked) {\n            data[name].push(node.value);\n          }\n        });\n      }\n    });\n\n    return data;\n  }\n}\n","import Validator from './core/Validator';\nimport Form from './core/Form';\nimport Input from './core/Input';\nimport Radio from './core/Radio';\nimport Select from './core/Select';\nimport Notice from './core/Notice';\nimport Sender from './core/Sender';\nimport FormHandlerUtil from './core/FormHandlerUtil';\nimport defaultConfig from './common/defaultConfig';\nimport {\n  RADIO_NODE_LIST,\n  HTML_SELECT_ELEMENT,\n  HTML_INPUT_ELEMENT,\n  HTML_TEXTAREA_ELEMENT,\n  INPUT,\n  UNDEFINED,\n  ERROR,\n  SUCCESS,\n  OBJECT,\n  LOAD,\n  FORM,\n} from './common/constants';\n\nexport default class FormHandler extends FormHandlerUtil{\n  constructor({...args}) {\n    super({...args});\n    this.init();\n  }\n\n  init() {\n    this.complementOptions().makeForm();\n\n    Object.entries(this.opts.fields).forEach(([name, field]) => {\n      this.makeField(name, field);\n      if (field.validation) {\n        this.makeNotice(name, field.notice);\n      }\n    });\n\n    return this;\n  }\n\n  makeForm() {\n    const options = {\n      fields: this.fields,\n      classNames: this.opts.classNames.form,\n      node: document.querySelector(this.opts.form.block),\n      submit: document.querySelector(this.opts.form.submit),\n      listener: this.submitHandler,\n    };\n\n    this.form = new Form(options);\n    this.makeNotice(FORM, this.opts.form.notice);\n\n    return this;\n  }\n\n  makeField(name, field) {\n    const node = this.form.node[name],\n      type = node.constructor.name,\n      options = {\n        node: node,\n        validation: field.validation,\n        min: field.min,\n        max: field.max,\n        send: field.send,\n        classNames: field.classNames,\n        callback: this.callbacks.onFieldChangeState,\n      };\n\n    if (type === HTML_INPUT_ELEMENT ||\n      type === HTML_TEXTAREA_ELEMENT) {\n      this.fields[name] = new Input(options);\n    }\n\n    if (type === RADIO_NODE_LIST) {\n      this.fields[name] = new Radio(options);\n    }\n\n    if (type === HTML_SELECT_ELEMENT) {\n      this.fields[name] = new Select(options);\n    }\n\n    this.fields[name].on(INPUT, this.inputHandler);\n    return this;\n  }\n\n  makeNotice(name, notice) {\n    const message = this.fields[name]\n      ? Validator.getMessage(this.fields[name].validatorOptions)\n      : false,\n      parent = notice.nextToField\n        ? this.fields[name].node\n        : document.querySelector(notice.attachTo),\n      options = {\n        form: this.form.node,\n        classNames: notice.classNames,\n        attachTo: notice.attachTo,\n        message: notice.message || message,\n        nextToField: notice.nextToField,\n        parent: parent,\n      };\n\n    this.notices[name] = new Notice(options);\n\n    return this;\n  }\n\n  setFieldStateFromResponse(response, property, name, message) {\n    if (typeof response.then !== UNDEFINED) {\n      response\n        .then(data => data.json())\n        .then(json => this.setFieldState(name, !!json[property], message));\n    } else {\n      response.addEventListener(LOAD, (ev) => {\n        this.setFieldState(name, !!JSON.parse(ev.target.response)[property], message);\n      });\n    }\n  }\n\n  setFieldState(name, valid, message = this.notices[name].message) {\n    const submitted = this.fields[name].submitted;\n\n    if (typeof valid === OBJECT) {\n      this.setFieldStateFromResponse(valid.response, valid.property, name, message);\n    } else {\n      this.fields[name].setFieldState(valid);\n    }\n\n    if (!valid && submitted) {\n      this.notices[name].show();\n    } else {\n      this.notices[name].hide();\n    }\n\n    this.form.setFormState();\n\n    return this;\n  }\n\n  inputHandler = ev => {\n    console.log(this.fields[ev.target.name])\n    const name = ev.target.name,\n          validation = Validator.validate(this.fields[name].validatorOptions);\n\n    if (this.fields[name].validation) {\n      this.setFieldState(name, validation.valid, validation.message);\n    }\n\n    this.form.setFormState();\n  }\n\n  submitHandler = (ev) => {\n    ev.preventDefault();\n    this.validateForm();\n\n    if (this.form.valid) {\n      this.notices.form.hide();\n\n      if (this.opts.sender.send) {\n        const options = {\n          type: this.opts.sender.type,\n          url: this.form.node.action,\n          method: this.form.node.method,\n          fields: this.fields,\n          form: this.form.node,\n          callbackOnSend: this.setFormStateFromResponse,\n        };\n\n        new Sender(options);\n\n        setTimeout(() => {\n          this.notices.form.hide();\n        }, 2000);\n      }\n    } else {\n      this.notices.form.show();\n      setTimeout(() => {\n        this.notices.form.hide();\n      }, 2000);\n    }\n  }\n\n  setFormStateFromResponse = (result) => {\n    if (result === SUCCESS) {\n      this.notices.form.message = this.opts.form.notice.successMessage;\n      this.form.send = true;\n      this.form.clear();\n    }\n    if (result === ERROR) {\n      this.notices.form.message = this.opts.form.notice.errorMessage;\n      this.form.send = false;\n    }\n    this.notices.form.show();\n  }\n}\n"],"names":["FormHandlerError","props","Error","Validator","custom","addCustomValidations","Object","entries","forEach","type","obj","validations","node","min","max","validation","message","isCheckboxChecked","valid","checked","el","isRadioChecked","Array","from","some","isSelected","options","filter","value","length","selected","isName","pattern","test","isEmail","isPhone","isNonEmpty","RADIO_NODE_LIST","HTML_SELECT_ELEMENT","HTML_INPUT_ELEMENT","HTML_TEXTAREA_ELEMENT","INPUT","LOAD","UNDEFINED","SUCCESS","ERROR","OBJECT","FORM","CLICK","DIV","READYSTATECHANGE","XHR","FETCH","AFTER","BEFORE","STRING","Form","opts","submit","classNames","fields","listener","submitted","sended","addEventListener","validness","Set","name","field","add","has","toggleClassNames","classList","remove","isNotValid","isValid","clear","Field","send","callback","constructor","removeEventListener","Input","Radio","Select","Notice","form","attachTo","nextToField","parent","mount","document","createElement","block","hidden","appendChild","insertBefore","nextElementSibling","visible","innerText","Sender","url","method","callbackOnSend","sendRequest","makeData","data","FormData","append","selectedIndex","xhr","XMLHttpRequest","open","ev","target","readyState","status","console","log","statusText","fetch","body","then","notice","successMessage","errorMessage","notices","disabledSubmitButton","sender","callbacks","onFieldChangeState","FormHandlerUtil","args","validator","customValidations","defaultConfig","isSelector","querySelector","getFieldNameBy","fieldOptions","noticeOptions","makeField","makeNotice","validate","validatorOptions","setFieldState","setFormState","push","FormHandler","preventDefault","validateForm","hide","action","setFormStateFromResponse","setTimeout","show","result","init","complementOptions","makeForm","submitHandler","on","inputHandler","getMessage","response","property","json","JSON","parse","setFieldStateFromResponse"],"mappings":"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"}
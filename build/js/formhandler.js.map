{"version":3,"file":"FormHandler.js.map","sources":["../../src/js/core/Form.js","../../src/js/core/Field.js","../../src/js/common/FormHandlerError.js","../../src/js/core/Validator.js","../../src/js/core/Notice.js","../../src/js/core/Sender.js","../../src/js/common/defaultConfig.js","../../src/js/FormHandler.js"],"sourcesContent":["export default class Form {\n  constructor({ ...opts }) {\n    this.opts = opts.opts;\n    this.node = document.querySelector(this.opts.form.block);\n    this.submit = this.node.querySelector(this.opts.form.submit);\n    this.classNames = this.opts.classNames.form;\n    this.fields = opts.fields;\n    this.notice = opts.notice;\n    this.method = this.node.method;\n    this.action = this.node.action;\n    this.messages = {\n      success: this.opts.form.notice.successMsg,\n      invalid: this.opts.form.notice.invalidMsg,\n      error: this.opts.form.notice.errorMsg,\n    };\n    this.listener = opts.listener;\n    this.valid = false;\n\n    this.submit.addEventListener('click', this.listener);\n  }\n\n  setFormState() {\n    let validness = new Set();\n\n    Object.entries(this.fields).forEach(([name, field]) => {\n      validness.add(field.valid);\n    });\n\n    this.valid = !validness.has(false);\n\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  setSubmitState() {}\n\n  resetForm() {\n    Object.entries(this.fields).forEach(([name, field]) => {\n      field.clear();\n    });\n\n    this.valid = false;\n    this.node.classList.remove(this.classNames.isNotValid);\n    this.node.classList.remove(this.classNames.isValid);\n  }\n}\n","export default class Field {\n  constructor({...opts}) {\n    this.name = opts.name;\n    this.node = opts.node;\n    this.listener = opts.listener;\n    this.validation = {\n      name: opts.validation.name,\n      minLength: opts.validation.minLength,\n      maxLength: opts.validation.maxLength,\n      validate: opts.validation.validate,\n    };\n    this.classNames = opts.classNames;\n    this.send = opts.send;\n    this.valid = false;\n  }\n\n  setFieldState(valid) {\n    this.valid = valid;\n    this.toggleClassNames();\n  }\n\n  toggleClassNames() {\n    if (this.valid) {\n      this.node.classList.remove(this.classNames.isNotValid);\n      this.node.classList.add(this.classNames.isValid);\n    } else {\n      this.node.classList.remove(this.classNames.isValid);\n      this.node.classList.add(this.classNames.isNotValid);\n    }\n  }\n\n  clear() {\n    this.node.value = \"\";\n    this.valid = false;\n    this.node.classList.remove(this.classNames.isNotValid);\n    this.node.classList.remove(this.classNames.isValid);\n  }\n}\n","export default function FormHandlerError(message) {\n  this.name = `FormHandlerError`;\n  this.message = message;\n}\n","import FormHandlerError from '../common/FormHandlerError';\n\nexport default class Validator {\n  constructor(custom) {\n    this.custom = custom;\n\n    this.addCustomValidations();\n  }\n\n  addCustomValidations() {\n    Object.entries(this.custom).forEach(([type, obj]) => {\n      Validator.validations[type] = obj;\n    });\n    console.log(Validator.validations)\n    return this;\n  };\n\n  static validate(type, node, min, max) {\n    let validation = Validator.validations[type];\n\n    if (!validation) {\n      throw new FormHandlerError(`No handler to validate type ${type}`);\n    }\n\n    return validation(node, min, max);\n  }\n\n  static getMessage(type, min, max) {\n    if (typeof Validator.validations[type].message === 'function') {\n      return Validator.validations[type].message(min, max);\n    } else {\n      return Validator.validations[type].message;\n    }\n  }\n\n  static validations = {\n    isName(node, min, max) {\n      const pattern = /[a-z]/;\n      let valid = pattern.test(node.value),\n          message;\n\n      if (min && node.value.length < min && node.value.length !== 0) {\n        valid = false;\n        message = `Must contain at least ${min} characters`\n      }\n      if (max && node.value.length > max) {\n        valid = false;\n        message = `Shouldn't contain more than ${max} characters`\n      }\n      if (node.value.length === 0) {\n        valid = false;\n        message = `Must contain characters between ${min} and ${max}`;\n      }\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isEmail(node) {\n      const pattern = /[a-z]/;\n      let valid = pattern.test(node.value),\n          message = `Should be a valid email address`;\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isAge(node, min, max) {\n      const pattern = /[0-9]/;\n      let valid = pattern.test(node.value),\n          message = `Must contain only numbers but contain: \"${node.value}\"`;\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isPhone(node, min, max) {\n      const pattern = /[0-9]/;\n      let valid = pattern.test(node.value),\n          message = `Must contain only numbers but contain: \"${node.value}\"`;\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isText(node, min, max) {\n      const pattern = /[a-z]/;\n      let valid = pattern.test(node.value),\n          message = `Must contain text`;\n\n      return {\n        valid,\n        message,\n      };\n    },\n    isNonEmpty(node, min, max) {\n      let valid = node.value.length > 0,\n          message = `Should be is non empty`;\n\n      return {\n        valid,\n        message,\n      };\n    },\n  };\n}\n","export default class Notice {\n  constructor({ ...opts }) {\n    this.form = opts.form;\n    this.message = null;\n    this.classNames = opts.classNames;\n    this.attachTo = opts.attachTo;\n    this.nextToField = opts.nextToField;\n    this.parent = opts.parent;\n    this.node = null;\n    this.mount();\n  }\n\n  mount() {\n    this.node = document.createElement('div');\n    this.node.classList.add(this.classNames.block);\n    this.node.classList.add(this.classNames.hidden);\n\n    if (this.attachTo) {\n      this.parent.appendChild(this.node);\n    } else {\n      if (this.nextToField === 'before') {\n        this.form.insertBefore(this.node, this.parent);\n      }\n      if (this.nextToField === 'after') {\n        this.form.insertBefore(this.node, this.parent.nextElementSibling);\n      }\n    }\n  };\n\n  show() {\n    this.node.classList.remove(this.classNames.hidden);\n    this.node.classList.add(this.classNames.visible);\n    this.node.innerText = this.message;\n  };\n\n  hide() {\n    this.node.classList.remove(this.classNames.visible);\n    this.node.classList.add(this.classNames.hidden);\n  }\n}\n","export default class Sender {\n  constructor(url, method, fields, listener) {\n    this.url = url;\n    this.method = method;\n    this.fields = fields;\n    this.listener = listener;\n    Object.defineProperty(this, 'test', {\n      value: 123,\n      writable: false,\n    });\n  }\n\n  makeData() {\n    let data = new FormData();\n\n    Object.entries(this.fields).forEach(([name, field]) => {\n      if (field.send) {\n        data.append(name, field.node.files && field.node.files[0] || field.node.value);\n      }\n    });\n\n    return data;\n  }\n\n  makeRequest() { //TODO: Add fetch method\n    this.request = new XMLHttpRequest();\n    this.request.open(this.method, this.url, true);\n\n    return this;\n  }\n\n  sendRequest() {\n    this.request.addEventListener('readystatechange', this.listener);\n\n    this.request.send(this.makeData());\n  }\n}\n","export default {\n  form: {\n    block: '.formhandler',\n    submit: '.formhandler__submit',\n    notice: {\n      attachTo: '.formhandler__notices',\n      successMsg: 'ok',\n      invalidMsg: 'please, fill the form',\n      errorMsg: 'oops',\n      classNames: {\n        block: 'formhandler__notice-form',\n        hidden: 'formhandler__notice-form--hidden',\n        visible: 'formhandler__notice-form--visible',\n      },\n    },\n  },\n  fields: {\n    minLength: false,\n    maxLength: false,\n    send: true,\n  },\n  notices: {\n    attachTo: '.formhandler__notices',\n    nextToField: false,\n  },\n  classNames: {\n    notices: {\n      block: 'formhandler__notice',\n      hidden: 'formhandler__notice--hidden',\n      visible: 'formhandler__notice--visible',\n    },\n    form: {\n      isValid: 'formhandler--is-valid',\n      isNotValid: 'formhandler--is-not-valid',\n      disabledSubmitButton: 'formhandler__submit--disabled',\n    },\n    fields: {\n      isValid: 'formhandler__field--is-valid',\n      isNotValid: 'formhandler__field--is-not-valid',\n    },\n  },\n}\n","import Form from './core/Form';\nimport Field from './core/Field';\nimport Validator from './core/Validator';\nimport Notice from './core/Notice';\nimport Sender from './core/Sender';\nimport defaultConfig from './common/defaultConfig';\n\nexport default class FormHandler {\n  constructor({ ...args }) {\n    this.opts = args;\n    this.fields = {};\n    this.notices = {};\n    this.form = null;\n    this.validator = new Validator(this.opts.customValidations);\n    this.init();\n  }\n\n  init() {\n    this.complementOptions().makeForm().makeFields().makeNotices();\n\n    return this;\n  }\n\n  complementOptions() { // TODO: Optimize it!\n    // Add lacks classNames and merge.\n    this.opts.classNames = this.opts.classNames ? { ...defaultConfig.classNames, ...this.opts.classNames } : defaultConfig.classNames;\n    this.opts.classNames.form = { ...defaultConfig.classNames.form, ...this.opts.classNames.form };\n    this.opts.classNames.fields = { ...defaultConfig.classNames.fields, ...this.opts.classNames.fields };\n    this.opts.classNames.notices = { ...defaultConfig.classNames.notices, ...this.opts.classNames.notices };\n    // Add lacks form options and merge.\n    this.opts.form = this.opts.form ? { ...defaultConfig.form, ...this.opts.form } : defaultConfig.form;\n    this.opts.form.notice = { ...defaultConfig.form.notice, ...this.opts.form.notice };\n    this.opts.form.notice.classNames = { ...this.opts.classNames.notice, ...this.opts.form.notice.classNames };\n    // Add lacks notices options and merge\n    this.opts.notices = { ...defaultConfig.notices, ...this.opts.notices };\n    // Add lacks fields options and merge\n    Object.entries(this.opts.fields).forEach(([name,obj]) => {\n      this.opts.fields[name] = {...defaultConfig.fields, ...this.opts.fields[name]};\n      this.opts.fields[name].classNames = this.opts.fields[name].classNames ? { ...this.opts.classNames.fields, ...this.opts.fields[name].classNames } : this.opts.classNames.fields;\n      this.opts.fields[name].notice = { ...this.opts.notices, ...this.opts.fields[name].notice };\n      this.opts.fields[name].notice.classNames = { ...this.opts.classNames.notices, ...this.opts.fields[name].notice.classNames };\n    });\n\n    return this;\n  }\n\n  makeForm() {\n    this.form = new Form({\n      opts: this.opts,\n      fields: this.fields,\n      notice: new Notice({\n        form: document.querySelector(this.opts.form.block),\n        message: this.opts.form.notice.successMsg,\n        classNames: this.opts.form.notice.classNames\n          ? { ...this.opts.classNames.notices, ...this.opts.form.notice.classNames }\n          : this.opts.classNames.notices,\n        attachTo: this.opts.form.notice.attachTo,\n        nextToField: false,\n        parent: document.querySelector(this.opts.form.notice.attachTo),\n      }),\n      listener: this.submitHandler,\n    });\n    return this;\n  }\n\n  makeFields() {\n    Object.entries(this.opts.fields).forEach(([name,field]) => {\n      this.fields[name] = new Field({\n        name: name,\n        validation: {\n          name: field.validation,\n          minLength: field.minLength,\n          maxLength: field.maxLength,\n          validate: field.validate,\n        },\n        node: this.form.node[name],\n        listener: this.inputHandler,\n        classNames: field.classNames,\n        send: field.send,\n      });\n    });\n    return this;\n  }\n\n  makeNotices() {\n    Object.entries(this.opts.fields).forEach(([name, field]) => {\n      const notice = field.notice;\n\n      this.notices[name] = new Notice({\n        form: this.form.node,\n        classNames: notice.classNames,\n        attachTo: notice.attachTo,\n        nextToField: notice.nextToField,\n        parent: notice.nextToField ? this.fields[name].node : document.querySelector(notice.attachTo),\n      });\n    });\n\n    return this;\n  }\n\n  setFieldState(name, valid, message) {\n    if (typeof valid !== 'undefined') {\n      this.fields[name].setFieldState(valid);\n\n      this.notices[name].message = message;\n\n      if (valid) {\n        this.notices[name].hide();\n      } else {\n        this.notices[name].show();\n      }\n      this.form.setFormState();\n    }\n    return this;\n  }\n\n  inputHandler = ev => {\n    const name = ev.target.name,\n          validation = this.fields[name].validation.name,\n          minLength = this.fields[name].validation.minLength,\n          maxLength = this.fields[name].validation.maxLength,\n          newValid = Validator.validate(validation, ev.target, minLength, maxLength);\n\n    if (newValid) {\n      this.setFieldState(name, newValid.valid, newValid.message);\n    }\n  }\n\n  readystatechangeHandler = (ev) => {\n    const state = ev.target.readyState,\n          status = ev.target.status;\n\n    if (state === 4) {\n      this.form.notice.message = this.form.messages.success;\n      this.form.notice.show();\n      this.form.resetForm();\n      setTimeout(() => {\n        this.form.notice.hide();\n      }, 2000);\n    }\n    if (status !== 200 && state === 4) {\n      console.log(`XMLHttpRequest: Status: ${status}, State: ${state}`);\n      this.form.notice.message = this.form.messages.error;\n      this.form.notice.show();\n      setTimeout(() => {\n        this.form.notice.hide();\n      }, 2000);\n    }\n  }\n\n  submitHandler = (ev) => {\n    ev.preventDefault();\n    Object.entries(this.fields).forEach(([name, field]) => {\n      const validation = Validator.validate(field.validation.name, field.node, field.validation.minLength, field.validation.maxLength);\n      field.node.addEventListener('input', field.listener);\n      console.log(name, validation)\n      if (typeof validation !== 'undefined') {\n        this.setFieldState(name, validation.valid, validation.message);\n      }\n    });\n\n    this.form.notice.hide();\n    this.form.setFormState();\n\n    if (this.form.valid) {\n      let sender = new Sender(\n        this.form.action,\n        this.form.method,\n        this.fields,\n        this.readystatechangeHandler\n      );\n      sender.makeRequest();\n      sender.sendRequest();\n    } else {\n      this.form.notice.message = this.form.messages.invalid;\n      this.form.notice.show();\n      setTimeout(() => {\n        this.form.notice.hide();\n      }, 2000)\n    }\n  }\n}\n"],"names":["Form","opts","node","document","querySelector","form","block","submit","classNames","fields","notice","method","action","messages","success","successMsg","invalid","invalidMsg","error","errorMsg","listener","valid","addEventListener","validness","Set","Object","entries","forEach","name","field","add","has","classList","remove","isNotValid","isValid","clear","Field","validation","minLength","maxLength","validate","send","toggleClassNames","value","FormHandlerError","message","Validator","custom","addCustomValidations","type","obj","validations","console","log","min","max","isName","pattern","test","length","isEmail","isAge","isPhone","isText","isNonEmpty","Notice","attachTo","nextToField","parent","mount","createElement","hidden","appendChild","insertBefore","nextElementSibling","visible","innerText","Sender","url","defineProperty","writable","data","FormData","append","files","request","XMLHttpRequest","open","makeData","notices","disabledSubmitButton","FormHandler","args","ev","target","newValid","setFieldState","state","readyState","status","show","resetForm","setTimeout","hide","preventDefault","setFormState","sender","readystatechangeHandler","makeRequest","sendRequest","validator","customValidations","init","complementOptions","makeForm","makeFields","makeNotices","defaultConfig","submitHandler","inputHandler"],"mappings":"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"}